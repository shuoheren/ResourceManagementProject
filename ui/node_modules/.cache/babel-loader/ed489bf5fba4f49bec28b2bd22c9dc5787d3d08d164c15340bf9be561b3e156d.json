{"ast":null,"code":"import _objectSpread from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import axios from\"axios\";import{AppContext}from\"../../Context/AppContext\";import\"./Formula.css\";import{BASE_URL}from\"../../config/urls\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Formula(){var _useContext=useContext(AppContext),currentUsername=_useContext.username;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({formulaName:\"\",formulaCostCode:\"\",edited:false,id:\"\"}),_useState4=_slicedToArray(_useState3,2),newFormula=_useState4[0],setNewFormula=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),editingFormula=_useState6[0],setEditingFormula=_useState6[1];useEffect(function(){fetchData();},[]);var fetchData=function fetchData(){axios.get(\"\".concat(BASE_URL,\"/formulas\")).then(function(response){setData(response.data);}).catch(function(error){console.error(\"Error fetching formula data:\",error);});};var handleAddFormula=function handleAddFormula(){axios.post(\"\".concat(BASE_URL,\"/formulas\"),newFormula).then(function(response){fetchData();setNewFormula({formulaName:\"\",formulaCostCode:\"\",edited:false,id:\"\"});}).catch(function(error){console.error(\"Error adding new formula:\",error);});};var handleEditFormula=function handleEditFormula(){if(editingFormula){axios.put(\"\".concat(BASE_URL,\"/formulas/\").concat(editingFormula.id),editingFormula).then(function(){fetchData();setEditingFormula(null);}).catch(function(error){console.error(\"Error editing formula:\",error);});}};var handleRowClick=function handleRowClick(formula){setEditingFormula(_objectSpread({},formula));};return/*#__PURE__*/_jsxs(\"div\",{className:\"formula-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"add-formula-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Formula\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Formula Name\",value:newFormula.formulaName,onChange:function onChange(e){return setNewFormula(_objectSpread(_objectSpread({},newFormula),{},{formulaName:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Cost Code\",value:newFormula.formulaCostCode,onChange:function onChange(e){return setNewFormula(_objectSpread(_objectSpread({},newFormula),{},{formulaCostCode:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddFormula,children:\"Add Formula\"})]}),editingFormula&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-formula-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Formula\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Formula Name\",value:editingFormula.formulaName,onChange:function onChange(e){return setEditingFormula(_objectSpread(_objectSpread({},editingFormula),{},{formulaName:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Cost Code\",value:editingFormula.formulaCostCode,onChange:function onChange(e){return setEditingFormula(_objectSpread(_objectSpread({},editingFormula),{},{formulaCostCode:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEditFormula,children:\"Confirm Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setEditingFormula(null);},children:\"Cancel\"})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"COST_CODE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EDITABLE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ITEM_ID\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return handleRowClick(item);},children:[/*#__PURE__*/_jsx(\"td\",{children:item.formulaName}),/*#__PURE__*/_jsx(\"td\",{children:item.formulaCostCode}),/*#__PURE__*/_jsx(\"td\",{children:item.edited?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:item.id})]},item.id);})})]})]});}export default Formula;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","AppContext","BASE_URL","jsx","_jsx","jsxs","_jsxs","Formula","_useContext","currentUsername","username","_useState","_useState2","_slicedToArray","data","setData","_useState3","formulaName","formulaCostCode","edited","id","_useState4","newFormula","setNewFormula","_useState5","_useState6","editingFormula","setEditingFormula","fetchData","get","concat","then","response","catch","error","console","handleAddFormula","post","handleEditFormula","put","handleRowClick","formula","_objectSpread","className","children","placeholder","value","onChange","e","target","onClick","map","item"],"sources":["/Users/shuohe/Desktop/ResourceManagementProject/ui/src/Pages/Formulas/Formula.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AppContext } from \"../../Context/AppContext\";\nimport \"./Formula.css\";\nimport { BASE_URL } from \"../../config/urls\";\n\nfunction Formula() {\n  const { username: currentUsername } = useContext(AppContext);\n  const [data, setData] = useState([]);\n\n  const [newFormula, setNewFormula] = useState({\n    formulaName: \"\",\n    formulaCostCode: \"\",\n    edited: false,\n    id: \"\",\n  });\n\n  const [editingFormula, setEditingFormula] = useState(null);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = () => {\n    axios\n      .get(`${BASE_URL}/formulas`)\n      .then((response) => {\n        setData(response.data);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching formula data:\", error);\n      });\n  };\n\n  const handleAddFormula = () => {\n    axios\n      .post(`${BASE_URL}/formulas`, newFormula)\n      .then((response) => {\n        fetchData();\n        setNewFormula({\n          formulaName: \"\",\n          formulaCostCode: \"\",\n          edited: false,\n          id: \"\",\n        });\n      })\n      .catch((error) => {\n        console.error(\"Error adding new formula:\", error);\n      });\n  };\n\n  const handleEditFormula = () => {\n    if (editingFormula) {\n      axios\n        .put(`${BASE_URL}/formulas/${editingFormula.id}`, editingFormula)\n        .then(() => {\n          fetchData();\n          setEditingFormula(null);\n        })\n        .catch((error) => {\n          console.error(\"Error editing formula:\", error);\n        });\n    }\n  };\n\n  const handleRowClick = (formula) => {\n    setEditingFormula({ ...formula });\n  };\n\n  return (\n    <div className=\"formula-page\">\n      {/* Add Formula Section */}\n      <div className=\"add-formula-section\">\n        <h3>Add Formula</h3>\n        <input\n          placeholder=\"Formula Name\"\n          value={newFormula.formulaName}\n          onChange={(e) =>\n            setNewFormula({ ...newFormula, formulaName: e.target.value })\n          }\n        />\n        <input\n          placeholder=\"Cost Code\"\n          value={newFormula.formulaCostCode}\n          onChange={(e) =>\n            setNewFormula({ ...newFormula, formulaCostCode: e.target.value })\n          }\n        />\n        <button onClick={handleAddFormula}>Add Formula</button>\n      </div>\n\n      {/* Edit Formula Section */}\n      {editingFormula && (\n        <div className=\"edit-formula-section\">\n          <h3>Edit Formula</h3>\n          <input\n            placeholder=\"Formula Name\"\n            value={editingFormula.formulaName}\n            onChange={(e) =>\n              setEditingFormula({\n                ...editingFormula,\n                formulaName: e.target.value,\n              })\n            }\n          />\n          <input\n            placeholder=\"Cost Code\"\n            value={editingFormula.formulaCostCode}\n            onChange={(e) =>\n              setEditingFormula({\n                ...editingFormula,\n                formulaCostCode: e.target.value,\n              })\n            }\n          />\n          <button onClick={handleEditFormula}>Confirm Edit</button>\n          <button onClick={() => setEditingFormula(null)}>Cancel</button>\n        </div>\n      )}\n\n      {/* Formula Table */}\n      <table>\n        <thead>\n          <tr>\n            <th>NAME</th>\n            <th>COST_CODE</th>\n            <th>EDITABLE</th>\n            <th>ITEM_ID</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data.map((item) => (\n            <tr key={item.id} onClick={() => handleRowClick(item)}>\n              <td>{item.formulaName}</td>\n              <td>{item.formulaCostCode}</td>\n              <td>{item.edited ? \"Yes\" : \"No\"}</td>\n              <td>{item.id}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default Formula;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}