{"ast":null,"code":"import _objectSpread from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import axios from\"axios\";import{AppContext}from\"../../../Context/AppContext\";import\"./ResourcePage.css\";import AddResource from\"../AddResource/AddResource\";import ResourceTable from\"../ResourceTable/ResourceTable\";import ResourcedetailsUpdate from\"../ResourcedetailsUpdate/ResourcedetailsUpdate\";import{BASE_URL}from\"../../../config/urls\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResourcePage=function ResourcePage(){var _useContext=useContext(AppContext),currentUsername=_useContext.username;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),resources=_useState2[0],setResources=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),editingResource=_useState4[0],setEditingResource=_useState4[1];var _useState5=useState({resourceName:\"\",resourceDetails:{resourceCode:\"\",resourceDescription:\"\",resourceCost:\"\"}}),_useState6=_slicedToArray(_useState5,2),newResource=_useState6[0],setNewResource=_useState6[1];useEffect(function(){axios.get(\"\".concat(BASE_URL,\"/resources\")).then(function(response){setResources(response.data);}).catch(function(error){console.error(\"Error fetching data:\",error);});},[]);var handleAddResource=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var resourceResponse,resourceDetailsResponse,resourcesResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(BASE_URL,\"/resources\"),newResource);case 3:resourceResponse=_context.sent;_context.next=6;return axios.post(\"\".concat(BASE_URL,\"/resource-details\"),newResource.resourceDetails);case 6:resourceDetailsResponse=_context.sent;_context.next=9;return axios.post(\"\".concat(BASE_URL,\"/resources/\").concat(resourceResponse.data.resourceId,\"/linkDetails/\").concat(resourceDetailsResponse.data.id));case 9:_context.next=11;return axios.get(\"\".concat(BASE_URL,\"/resources\"));case 11:resourcesResponse=_context.sent;setResources(resourcesResponse.data);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.error(\"Error adding new resource:\",_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function handleAddResource(){return _ref.apply(this,arguments);};}();var handleRowClick=function handleRowClick(resource){setEditingResource(_objectSpread({},resource));};var updateResourceName=function updateResourceName(resourceId,newName){axios.put(\"\".concat(BASE_URL,\"/resources/\").concat(resourceId,\"/name\"),{name:newName}).then(function(){// Update the frontend state if needed\n}).catch(function(error){console.error(\"Error updating resource name:\",error);});};var updateResourceDetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resourceDetailsId,newDetails){var resourcesResponse;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.put(\"\".concat(BASE_URL,\"/resource-details/\").concat(resourceDetailsId),newDetails);case 3:_context2.next=5;return axios.get(\"\".concat(BASE_URL,\"/resources\"));case 5:resourcesResponse=_context2.sent;setResources(resourcesResponse.data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.error(\"Error updating resource details:\",_context2.t0);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,9]]);}));return function updateResourceDetails(_x,_x2){return _ref2.apply(this,arguments);};}();var confirmUpdates=function confirmUpdates(){if(editingResource){updateResourceName(editingResource.id,editingResource.resourceName);updateResourceDetails(editingResource.resourceDetails.id,editingResource.resourceDetails);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"resource-container\",children:[/*#__PURE__*/_jsx(AddResource,{newResource:newResource,setNewResource:setNewResource,handleAddResource:handleAddResource}),/*#__PURE__*/_jsx(ResourceTable,{resources:resources,onRowClick:handleRowClick}),editingResource&&/*#__PURE__*/_jsx(ResourcedetailsUpdate,{editingResource:editingResource,setEditingResource:setEditingResource,confirmUpdates:confirmUpdates})]});};export default ResourcePage;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","AppContext","AddResource","ResourceTable","ResourcedetailsUpdate","BASE_URL","jsx","_jsx","jsxs","_jsxs","ResourcePage","_useContext","currentUsername","username","_useState","_useState2","_slicedToArray","resources","setResources","_useState3","_useState4","editingResource","setEditingResource","_useState5","resourceName","resourceDetails","resourceCode","resourceDescription","resourceCost","_useState6","newResource","setNewResource","get","concat","then","response","data","catch","error","console","handleAddResource","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resourceResponse","resourceDetailsResponse","resourcesResponse","wrap","_callee$","_context","prev","next","post","sent","resourceId","id","t0","stop","apply","arguments","handleRowClick","resource","_objectSpread","updateResourceName","newName","put","name","updateResourceDetails","_ref2","_callee2","resourceDetailsId","newDetails","_callee2$","_context2","_x","_x2","confirmUpdates","className","children","onRowClick"],"sources":["/Users/shuohe/Desktop/ResourceManagementProject/ui/src/Pages/Resources/ResourcePage/ResourcePage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AppContext } from \"../../../Context/AppContext\";\nimport \"./ResourcePage.css\";\nimport AddResource from \"../AddResource/AddResource\";\nimport ResourceTable from \"../ResourceTable/ResourceTable\";\nimport ResourcedetailsUpdate from \"../ResourcedetailsUpdate/ResourcedetailsUpdate\";\nimport { BASE_URL } from \"../../../config/urls\";\n\nconst ResourcePage = () => {\n  const { username: currentUsername } = useContext(AppContext);\n\n  const [resources, setResources] = useState([]);\n  const [editingResource, setEditingResource] = useState(null);\n  const [newResource, setNewResource] = useState({\n    resourceName: \"\",\n    resourceDetails: {\n      resourceCode: \"\",\n      resourceDescription: \"\",\n      resourceCost: \"\",\n    },\n  });\n\n  useEffect(() => {\n    axios\n      .get(`${BASE_URL}/resources`)\n      .then((response) => {\n        setResources(response.data);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data:\", error);\n      });\n  }, []);\n\n  const handleAddResource = async () => {\n    try {\n      const resourceResponse = await axios.post(\n        `${BASE_URL}/resources`,\n        newResource\n      );\n      const resourceDetailsResponse = await axios.post(\n        `${BASE_URL}/resource-details`,\n        newResource.resourceDetails\n      );\n\n      await axios.post(\n        `${BASE_URL}/resources/${resourceResponse.data.resourceId}/linkDetails/${resourceDetailsResponse.data.id}`\n      );\n\n      const resourcesResponse = await axios.get(`${BASE_URL}/resources`);\n      setResources(resourcesResponse.data);\n    } catch (error) {\n      console.error(\"Error adding new resource:\", error);\n    }\n  };\n\n  const handleRowClick = (resource) => {\n    setEditingResource({ ...resource });\n  };\n\n  const updateResourceName = (resourceId, newName) => {\n    axios\n      .put(`${BASE_URL}/resources/${resourceId}/name`, {\n        name: newName,\n      })\n      .then(() => {\n        // Update the frontend state if needed\n      })\n      .catch((error) => {\n        console.error(\"Error updating resource name:\", error);\n      });\n  };\n\n  const updateResourceDetails = async (resourceDetailsId, newDetails) => {\n    try {\n      await axios.put(\n        `${BASE_URL}/resource-details/${resourceDetailsId}`,\n        newDetails\n      );\n      // After updating the resource details, fetch the resources again to get the updated list.\n      const resourcesResponse = await axios.get(`${BASE_URL}/resources`);\n      setResources(resourcesResponse.data);\n    } catch (error) {\n      console.error(\"Error updating resource details:\", error);\n    }\n  };\n\n  const confirmUpdates = () => {\n    if (editingResource) {\n      updateResourceName(editingResource.id, editingResource.resourceName);\n      updateResourceDetails(\n        editingResource.resourceDetails.id,\n        editingResource.resourceDetails\n      );\n    }\n  };\n\n  return (\n    <div className=\"resource-container\">\n      <AddResource\n        newResource={newResource}\n        setNewResource={setNewResource}\n        handleAddResource={handleAddResource}\n      />\n      <ResourceTable resources={resources} onRowClick={handleRowClick} />\n      {editingResource && (\n        <ResourcedetailsUpdate\n          editingResource={editingResource}\n          setEditingResource={setEditingResource}\n          confirmUpdates={confirmUpdates}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ResourcePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}