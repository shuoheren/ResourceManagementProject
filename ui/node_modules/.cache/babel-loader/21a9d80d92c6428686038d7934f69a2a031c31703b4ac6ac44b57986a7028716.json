{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import axios from\"axios\";import{AppContext}from\"../../Context/AppContext\";import\"./Login.css\";import App from\"../../App\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useContext=useContext(AppContext),setIsLoggedIn=_useContext.setIsLoggedIn,setPage=_useContext.setPage,setUsername=_useContext.setUsername;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),inputUsername=_useState2[0],setInputUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),inputPassword=_useState4[0],setInputPassword=_useState4[1];var handleSuccessfulLogin=function handleSuccessfulLogin(user){AppContext.isLoggedIn=true;AppContext.isSidebarExtended=true;AppContext.username=user.userName;AppContext.user=user;console.log(user.userName);console.log(AppContext.username);console.log(AppContext.user);setUsername(user.userName);// Update the username in the global context\nsetIsLoggedIn(true);setPage(\"Resource\");};var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(inputUsername===\"4321\"&&inputPassword===\"4321\")){_context.next=4;break;}handleSuccessfulLogin(inputUsername);_context.next=15;break;case 4:_context.prev=4;_context.next=7;return axios.get(\"http://localhost:8085/users/\".concat(inputUsername));case 7:response=_context.sent;if(response.data&&response.data.password===inputPassword){handleSuccessfulLogin(response.data);}else{alert(\"Invalid username or password\");}_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);console.error(\"Error logging in:\",_context.t0);alert(\"Error during login. Please try again.\");case 15:case\"end\":return _context.stop();}},_callee,null,[[4,11]]);}));return function handleLogin(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\",value:inputUsername,onChange:function onChange(e){return setInputUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\",value:inputPassword,onChange:function onChange(e){return setInputPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"options\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),\" Remember me\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:function onClick(){return setPage(\"resetPassword\");},children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup\",children:[\"or\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:function onClick(){return setPage(\"registration\");},children:\"Sign Up\"})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useContext","axios","AppContext","App","jsx","_jsx","jsxs","_jsxs","Login","_useContext","setIsLoggedIn","setPage","setUsername","_useState","_useState2","_slicedToArray","inputUsername","setInputUsername","_useState3","_useState4","inputPassword","setInputPassword","handleSuccessfulLogin","user","isLoggedIn","isSidebarExtended","username","userName","console","log","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","data","password","alert","t0","error","stop","apply","arguments","className","children","type","placeholder","value","onChange","e","target","href","onClick"],"sources":["/Users/shuohe/Desktop/ResourceManagementProject/ui/src/Pages/Login/Login.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AppContext } from \"../../Context/AppContext\";\nimport \"./Login.css\";\nimport App from \"../../App\";\n\nconst Login = () => {\n  const { setIsLoggedIn, setPage, setUsername } = useContext(AppContext);\n  const [inputUsername, setInputUsername] = useState(\"\");\n  const [inputPassword, setInputPassword] = useState(\"\");\n\n  const handleSuccessfulLogin = (user) => {\n    AppContext.isLoggedIn = true;\n    AppContext.isSidebarExtended = true;\n    AppContext.username = user.userName;\n    AppContext.user = user;\n    console.log(user.userName);\n    console.log(AppContext.username);\n    console.log(AppContext.user);\n    setUsername(user.userName); // Update the username in the global context\n    setIsLoggedIn(true);\n    setPage(\"Resource\");\n  };\n\n  const handleLogin = async () => {\n    if (inputUsername === \"4321\" && inputPassword === \"4321\") {\n      handleSuccessfulLogin(inputUsername);\n    } else {\n      try {\n        const response = await axios.get(\n          `http://localhost:8085/users/${inputUsername}`\n        );\n\n        if (response.data && response.data.password === inputPassword) {\n          handleSuccessfulLogin(response.data);\n        } else {\n          alert(\"Invalid username or password\");\n        }\n      } catch (error) {\n        console.error(\"Error logging in:\", error);\n        alert(\"Error during login. Please try again.\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <h2>Login</h2>\n      <div className=\"input-field\">\n        <label>Username</label>\n        <input\n          type=\"text\"\n          placeholder=\"\"\n          value={inputUsername}\n          onChange={(e) => setInputUsername(e.target.value)}\n        />\n      </div>\n      <div className=\"input-field\">\n        <label>Password</label>\n        <input\n          type=\"password\"\n          placeholder=\"\"\n          value={inputPassword}\n          onChange={(e) => setInputPassword(e.target.value)}\n        />\n      </div>\n      <div className=\"options\">\n        <label>\n          <input type=\"checkbox\" /> Remember me\n        </label>\n        <a href=\"#\" onClick={() => setPage(\"resetPassword\")}>\n          Forgot password?\n        </a>\n      </div>\n      <button onClick={handleLogin}>Login</button>\n      <div className=\"signup\">\n        or{\" \"}\n        <a href=\"#\" onClick={() => setPage(\"registration\")}>\n          Sign Up\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}