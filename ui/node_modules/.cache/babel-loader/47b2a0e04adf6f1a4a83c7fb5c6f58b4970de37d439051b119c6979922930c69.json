{"ast":null,"code":"import _slicedToArray from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import axios from\"axios\";import{AppContext}from\"../../../Context/AppContext\";import\"./ProjectPage.css\";import NewProjectForm from\"../NewProjectForm/NewProjectForm\";import ProjectDropdown from\"../ProjectDropdown/ProjectDropdown\";import ResourceList from\"../ResourceList/ResourceList\";import LinkedResourceList from\"../LinkedResourceList/LinkedResourceList\";import{BASE_URL}from\"../../../config/urls\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProjectPage=function ProjectPage(){var _useContext=useContext(AppContext),username=_useContext.username;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),resources=_useState4[0],setResources=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedProject=_useState6[0],setSelectedProject=_useState6[1];var _useState7=useState(new Set()),_useState8=_slicedToArray(_useState7,2),linkedResourceIds=_useState8[0],setLinkedResourceIds=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),newProjectName=_useState10[0],setNewProjectName=_useState10[1];var fetchProjectById=function fetchProjectById(projectId){axios.get(\"\".concat(BASE_URL,\"/projects/\").concat(projectId)).then(function(response){var updatedProject=response.data;setSelectedProject(updatedProject);setLinkedResourceIds(new Set(updatedProject.resourceIds));}).catch(function(error){console.error(\"Error fetching project with ID \".concat(projectId,\":\"),error);});};var handleProjectSelection=function handleProjectSelection(project){setSelectedProject(project);if(project&&project.projectId){fetchProjectById(project.projectId);}};var fetchProjects=function fetchProjects(){axios.get(\"\".concat(BASE_URL,\"/projects\")).then(function(response){setProjects(response.data.filter(function(p){return p.userName===username;}));}).catch(function(error){console.error(\"Error fetching projects:\",error);});};useEffect(function(){fetchProjects();axios.get(\"\".concat(BASE_URL,\"/resources\")).then(function(response){setResources(response.data);}).catch(function(error){console.error(\"Error fetching resources:\",error);});},[]);var linkResourceToProject=function linkResourceToProject(resourceId){if(selectedProject){axios.post(\"\".concat(BASE_URL,\"/resources/\").concat(resourceId,\"/linkToProject/\").concat(selectedProject.projectId)).then(function(){fetchProjectById(selectedProject.projectId);}).catch(function(error){console.error(\"Error linking resource to project:\",error);});}};var unlinkResourceFromProject=function unlinkResourceFromProject(resourceId){if(selectedProject){axios.delete(\"\".concat(BASE_URL,\"/resources/\").concat(resourceId,\"/unlinkFromProject/\").concat(selectedProject.projectId)).then(function(){fetchProjectById(selectedProject.projectId);}).catch(function(error){console.error(\"Error unlinking resource from project:\",error);});}};var handleCreateProject=function handleCreateProject(){axios.post(\"\".concat(BASE_URL,\"/projects/\").concat(username,\"/\").concat(newProjectName)).then(function(response){fetchProjects();setNewProjectName(\"\");}).catch(function(error){console.error(\"Error creating new project:\",error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"project-container\",children:[/*#__PURE__*/_jsx(NewProjectForm,{onNewProject:fetchProjects}),/*#__PURE__*/_jsx(ProjectDropdown,{projects:projects,onSelect:handleProjectSelection,selectedProject:selectedProject}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(ResourceList,{resources:resources,linkedResourceIds:linkedResourceIds,onLink:linkResourceToProject}),/*#__PURE__*/_jsx(LinkedResourceList,{resources:resources,linkedResourceIds:linkedResourceIds,onUnlink:unlinkResourceFromProject,selectedProject:selectedProject})]})]});};export default ProjectPage;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","AppContext","NewProjectForm","ProjectDropdown","ResourceList","LinkedResourceList","BASE_URL","jsx","_jsx","jsxs","_jsxs","ProjectPage","_useContext","username","_useState","_useState2","_slicedToArray","projects","setProjects","_useState3","_useState4","resources","setResources","_useState5","_useState6","selectedProject","setSelectedProject","_useState7","Set","_useState8","linkedResourceIds","setLinkedResourceIds","_useState9","_useState10","newProjectName","setNewProjectName","fetchProjectById","projectId","get","concat","then","response","updatedProject","data","resourceIds","catch","error","console","handleProjectSelection","project","fetchProjects","filter","p","userName","linkResourceToProject","resourceId","post","unlinkResourceFromProject","delete","handleCreateProject","className","children","onNewProject","onSelect","onLink","onUnlink"],"sources":["/Users/shuohe/Desktop/ResourceManagementProject/ui/src/Pages/Projects/ProjectPage/ProjectPage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AppContext } from \"../../../Context/AppContext\";\nimport \"./ProjectPage.css\";\nimport NewProjectForm from \"../NewProjectForm/NewProjectForm\";\nimport ProjectDropdown from \"../ProjectDropdown/ProjectDropdown\";\nimport ResourceList from \"../ResourceList/ResourceList\";\nimport LinkedResourceList from \"../LinkedResourceList/LinkedResourceList\";\nimport { BASE_URL } from \"../../../config/urls\";\n\nconst ProjectPage = () => {\n  const { username } = useContext(AppContext);\n  const [projects, setProjects] = useState([]);\n  const [resources, setResources] = useState([]);\n  const [selectedProject, setSelectedProject] = useState(null);\n  const [linkedResourceIds, setLinkedResourceIds] = useState(new Set());\n  const [newProjectName, setNewProjectName] = useState(\"\");\n\n  const fetchProjectById = (projectId) => {\n    axios\n      .get(`${BASE_URL}/projects/${projectId}`)\n      .then((response) => {\n        const updatedProject = response.data;\n        setSelectedProject(updatedProject);\n        setLinkedResourceIds(new Set(updatedProject.resourceIds));\n      })\n      .catch((error) => {\n        console.error(`Error fetching project with ID ${projectId}:`, error);\n      });\n  };\n\n  const handleProjectSelection = (project) => {\n    setSelectedProject(project);\n    if (project && project.projectId) {\n      fetchProjectById(project.projectId);\n    }\n  };\n\n  const fetchProjects = () => {\n    axios\n      .get(`${BASE_URL}/projects`)\n      .then((response) => {\n        setProjects(response.data.filter((p) => p.userName === username));\n      })\n      .catch((error) => {\n        console.error(\"Error fetching projects:\", error);\n      });\n  };\n\n  useEffect(() => {\n    fetchProjects();\n    axios\n      .get(`${BASE_URL}/resources`)\n      .then((response) => {\n        setResources(response.data);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching resources:\", error);\n      });\n  }, []);\n\n  const linkResourceToProject = (resourceId) => {\n    if (selectedProject) {\n      axios\n        .post(\n          `${BASE_URL}/resources/${resourceId}/linkToProject/${selectedProject.projectId}`\n        )\n        .then(() => {\n          fetchProjectById(selectedProject.projectId);\n        })\n        .catch((error) => {\n          console.error(\"Error linking resource to project:\", error);\n        });\n    }\n  };\n\n  const unlinkResourceFromProject = (resourceId) => {\n    if (selectedProject) {\n      axios\n        .delete(\n          `${BASE_URL}/resources/${resourceId}/unlinkFromProject/${selectedProject.projectId}`\n        )\n        .then(() => {\n          fetchProjectById(selectedProject.projectId);\n        })\n        .catch((error) => {\n          console.error(\"Error unlinking resource from project:\", error);\n        });\n    }\n  };\n\n  const handleCreateProject = () => {\n    axios\n      .post(`${BASE_URL}/projects/${username}/${newProjectName}`)\n      .then((response) => {\n        fetchProjects();\n        setNewProjectName(\"\");\n      })\n      .catch((error) => {\n        console.error(\"Error creating new project:\", error);\n      });\n  };\n\n  return (\n    <div className=\"project-container\">\n      <NewProjectForm onNewProject={fetchProjects} />\n      <ProjectDropdown\n        projects={projects}\n        onSelect={handleProjectSelection}\n        selectedProject={selectedProject}\n      />\n      <div className=\"content-wrapper\">\n        <ResourceList\n          resources={resources}\n          linkedResourceIds={linkedResourceIds}\n          onLink={linkResourceToProject}\n        />\n        <LinkedResourceList\n          resources={resources}\n          linkedResourceIds={linkedResourceIds}\n          onUnlink={unlinkResourceFromProject}\n          selectedProject={selectedProject}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ProjectPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}