{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/shuohe/Desktop/ResourceManagementProject/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import axios from\"axios\";import{AppContext}from\"../../Context/AppContext\";import\"./RegistrationPage.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegistrationPage=function RegistrationPage(){var _useContext=useContext(AppContext),setIsLoggedIn=_useContext.setIsLoggedIn,setPage=_useContext.setPage;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var redirectToLogin=function redirectToLogin(){window.location.href=\"http://localhost:3000\";};var handleRegistration=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var checkResponse,registerResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(username===\"4321\"&&password===\"4321\"&&email===\"4321\")){_context.next=4;break;}setIsLoggedIn(true);setPage(\"Resource\");return _context.abrupt(\"return\");case 4:_context.prev=4;_context.next=7;return axios.get(\"http://localhost:8085/users/\".concat(username));case 7:checkResponse=_context.sent;if(!(checkResponse.status===200)){_context.next=11;break;}alert(\"Username is already taken. Please choose another.\");return _context.abrupt(\"return\");case 11:_context.next=19;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);if(!(_context.t0.response&&_context.t0.response.status!==404)){_context.next=19;break;}console.error(\"Error checking username:\",_context.t0);alert(\"Error during registration. Please try again.\");return _context.abrupt(\"return\");case 19:_context.prev=19;_context.next=22;return axios.post(\"http://localhost:8085/users\",{userName:username,password:password,email:email,role:\"USER\"});case 22:registerResponse=_context.sent;if(registerResponse.data&&registerResponse.data.userName){setIsLoggedIn(true);AppContext.username=username;AppContext.user=registerResponse.data;setPage(\"Resource\");}else{alert(\"Registration failed!\");}_context.next=30;break;case 26:_context.prev=26;_context.t1=_context[\"catch\"](19);console.error(\"Error registering user:\",_context.t1);alert(\"Error during registration. Please try again.\");case 30:case\"end\":return _context.stop();}},_callee,null,[[4,13],[19,26]]);}));return function handleRegistration(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"registration-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registration\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:redirectToLogin,className:\"signin-link\",children:\"Already have an account? Sign in here\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegistration,children:\"Register\"})]})]});};export default RegistrationPage;","map":{"version":3,"names":["React","useState","useContext","axios","AppContext","jsx","_jsx","jsxs","_jsxs","RegistrationPage","_useContext","setIsLoggedIn","setPage","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","email","setEmail","redirectToLogin","window","location","href","handleRegistration","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","checkResponse","registerResponse","wrap","_callee$","_context","prev","next","abrupt","get","concat","sent","status","alert","t0","response","console","error","post","userName","role","data","user","t1","stop","apply","arguments","className","children","onSubmit","e","preventDefault","htmlFor","type","id","value","onChange","target","onClick"],"sources":["/Users/shuohe/Desktop/ResourceManagementProject/ui/src/Pages/RegistrationPage/RegistrationPage.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AppContext } from \"../../Context/AppContext\";\nimport \"./RegistrationPage.css\";\n\nconst RegistrationPage = () => {\n  const { setIsLoggedIn, setPage } = useContext(AppContext);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n\n  const redirectToLogin = () => {\n    window.location.href = \"http://localhost:3000\";\n  };\n  const handleRegistration = async () => {\n    // Check if username is hardcoded value\n    if (username === \"4321\" && password === \"4321\" && email === \"4321\") {\n      setIsLoggedIn(true);\n      setPage(\"Resource\");\n      return;\n    }\n\n    try {\n      // Check if username already exists\n      const checkResponse = await axios.get(\n        `http://localhost:8085/users/${username}`\n      );\n\n      if (checkResponse.status === 200) {\n        alert(\"Username is already taken. Please choose another.\");\n        return;\n      }\n    } catch (error) {\n      // If the error is due to a 404 status (username not found), continue with registration.\n      // Otherwise, show a generic error.\n      if (error.response && error.response.status !== 404) {\n        console.error(\"Error checking username:\", error);\n        alert(\"Error during registration. Please try again.\");\n        return;\n      }\n    }\n\n    // Register the user\n    try {\n      const registerResponse = await axios.post(\"http://localhost:8085/users\", {\n        userName: username,\n        password: password,\n        email: email,\n        role: \"USER\",\n      });\n\n      if (registerResponse.data && registerResponse.data.userName) {\n        setIsLoggedIn(true);\n        AppContext.username = username;\n        AppContext.user = registerResponse.data;\n        setPage(\"Resource\");\n      } else {\n        alert(\"Registration failed!\");\n      }\n    } catch (error) {\n      console.error(\"Error registering user:\", error);\n      alert(\"Error during registration. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"registration-container\">\n      <h2>Registration</h2>\n      <form onSubmit={(e) => e.preventDefault()}>\n        <div className=\"form-group\">\n          <label htmlFor=\"username\">Username:</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"email\">Email:</label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password:</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n\n        <a href=\"#\" onClick={redirectToLogin} className=\"signin-link\">\n          Already have an account? Sign in here\n        </a>\n        <button onClick={handleRegistration}>Register</button>\n      </form>\n    </div>\n  );\n};\n\nexport default RegistrationPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}